{% extends "../header.html" %}
{% block header_title %} Home {% end %}

{% block header_static %}
<link rel="stylesheet" href="{{ static_url('extension/bootstrap-daterangepicker/daterangepicker.css')}}">>
<link rel="stylesheet" href="{{static_url('extension/jquery-fine-uploader/fine-uploader-new.css')}}">
{% end %}

{% block page_content %}
<div class="right_col" role="main">
  <div class="">
    <div class="page-title">
      <div class="title_left">
        <h3><i class="fa fa-film"></i> 电影添加</h3>
      </div>
    </div>
    <div class="clearfix"></div>
    <div class="row">
      <div class="col-md-12 col-sm-12 col-xs-12">
        <div class="x_panel">
          <div class="x_title">
            <h2>手动添加</h2>
            <ul class="nav navbar-right panel_toolbox">
              <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
              </li>
              <li><a class="close-link"><i class="fa fa-close"></i></a>
              </li>
            </ul>
            <div class="clearfix"></div>
          </div>
          <div class="x_content">
            <form id="input_box" href="/api/movie/add" \
                  class="form-horizontal form-label-left" \
                  method="post" \
                  enctype="multipart/form-data" data-parsley-validate>
              <span class="section">影片信息:</span>

              <div class="item form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="movie_id">ID: <span class="required">*</span>
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input id="movie_id" class="form-control col-md-7 col-xs-12" name="movie_id" placeholder="影片ID"
                         required type="text" minlength="1" maxlength="50">
                </div>
              </div>
              <div class="item form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="name">影片名称: <span
                        class="required">*</span>
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input id="name" class="form-control col-md-7 col-xs-12" name="movie_name" placeholder="影片名称"
                          type="text" data-parsley-trigger="blur change" required minlength="1" maxlength="50">
                </div>
              </div>
              <div class="item form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="score">影片评分: <span
                        class="required">*</span>
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input id="score" class="form-control col-md-7 col-xs-12" name="movie_score"
                         placeholder="影片评分"
                         required step="any" type="number" data-parsley-trigger="blur change" min="0" max="10">
                </div>
              </div>
              <div class="item form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="category">电影类型: <span
                        class="required">*</span>
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <select class="form-control" form="input_box" name="movie_category" id="category">
                    <option value="动作">动作</option>
                    <option value="科幻">科幻</option>
                    <option value="喜剧">喜剧</option>
                    <option value="爱情">爱情</option>
                    <option value="惊悚">惊悚</option>
                    <option value="恐怖">恐怖</option>
                    <option value="动画">动画</option>
                    <option value="武侠">武侠</option>
                  </select>
                </div>
              </div>
              <div class="item form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="single_cal4">电影上映日期: <span
                        class="required">*</span>
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input type="text" class="form-control has-feedback-left" id="single_cal4" name="movie_born" placeholder="First Name" aria-describedby="inputSuccess2Status4">
                  <span class="fa fa-calendar-o form-control-feedback left" aria-hidden="true"></span>
                  <span id="inputSuccess2Status4" class="sr-only">(success)</span>
                </div>
              </div>
              <div class="item form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="performer">演员: <span
                        class="required" >*</span>
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input type="text" id="performer" name="movie_performer" required
                         class="form-control col-md-7 col-xs-12"  placeholder="演员" minlength="1" maxlength="50">
                </div>
              </div>
              <div class="item form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="area">区域: <span
                        class="required">*</span>
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <select class="form-control" form="input_box" name="movie_area" id="area">
                    <option value="中国">中国</option>
                    <option value="日本">日本</option>
                    <option value="韩国" selected>韩国</option>
                    <option value="欧美">欧美</option>
                    <option value="印度">印度</option>
                    <option value="泰国">泰国</option>
                    <option value="台湾">台湾</option>
                    <option value="香港">香港</option>
                  </select>
                </div>
              </div>
              <div class="item form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="language">语言: <span
                        class="required">*</span>
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <select class="form-control" form="input_box" name="movie_language" id="language">
                    <option value="英语">英语</option>
                    <option value="中文">中文</option>
                    <option value="韩语">韩语</option>
                    <option value="日语">日语</option>
                    <option value="法语">法语</option>
                    <option value="俄语">俄语</option>

                  </select>
                </div>
              </div>
              <div class="item form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="state">状态: <span
                        class="required">*</span>
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input type="text" id="state" name="movie_state" required
                         class="form-control col-md-7 col-xs-12" , placeholder="状态" minlength="1" maxlength="50">
                </div>
              </div>
              <div class="item form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="image_path">图片地址: <span
                        class="required">*</span>
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                  <input type="file" id="image_path" name="movie_image_path" required
                         class="form-control col-md-7 col-xs-12" , placeholder="图片地址">
                </div>
              </div>
              <div class="item form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="paly_url">视频播放地址: <span
                        class="required">*</span>
                </label>
                  <div class="col-md-2 col-sm-2 col-xs-12">
                    <select class="form-control" form="input_box" name="play_url_video_type" id="video_type">
                      <option value="video/mp4">MP4</option>
                      <option value="application/vnd.apple.mpegurl">M3U8</option>
                      <option value="video/flv">FLV</option>
                      <option value="video/xiongmao_flv">熊猫</option>
                      <option value="application/bili_mp4">哔哩_MP4</option>
                      <option value="application/m3u8_iqyi">M3U8_IQIYI</option>
                      <option value="application/x-mpegURL">M3U8_EXT</option>
                    </select>
                  </div>
                  <div class="col-md-2 col-sm-2 col-xs-12">
                    <input type="text" id="paly_url" name="movie_play_url" required
                           class="form-control col-md-7 col-xs-12"  placeholder="URL" minlength="1" maxlength="250">
                  </div>
                  <div class="col-md-2 col-sm-2 col-xs-12">
                    <select class="form-control" form="input_box" name="play_url_video_choice" id="video_choice">
                      <option value="标清">标清</option>
                      <option value="高清">高清</option>
                      <option value="超清">超清</option>
                      <option value="1080P">1080P</option>
                    </select>
                  </div>

              </div>
              <div class="item form-group">
                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="content">视频简介: <span
                        class="required">*</span>
                </label>
                <div class="col-md-6 col-sm-6 col-xs-12">
                    <textarea id="content" name="movie_content" required
                              class="form-control col-md-7 col-xs-12" , placeholder="视频简介"></textarea>
                </div>
              </div>

              <div class="ln_solid"></div>
              <div class="form-group">
                <div class="col-md-6 col-md-offset-3">
                  <button type="submit" class="btn btn-primary">Cancel</button>
                  <button id="send" type="submit" class="btn btn-success" >Submit</button>
                </div>
              </div>
            </form>
          </div>

        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 col-sm-12 col-xs-12">
        <div class="x_panel">
          <div class="x_title">
            <h2>导入添加</h2>
            <ul class="nav navbar-right panel_toolbox">
              <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
              </li>
              <li><a class="close-link"><i class="fa fa-close"></i></a>
              </li>
            </ul>
            <div class="clearfix"></div>
          </div>
          <div class="x_content">
              <div id="fine-uploader"></div>
              <!--<form id="export_form" href="/api/movie/export"-->
                <!--class="form-horizontal form-label-left" \-->
                <!--method="post" \-->
                <!--enctype="multipart/form-data">-->
                <!--<span class="section"> 导入模板信息</span>-->
                <!--<div class="item form-group">-->
                  <!--<label class="control-label col-md-3 col-sm-3 col-xs-12" for="export_data">模板文件: <span-->
                          <!--class="required">*</span>-->
                  <!--</label>-->
                  <!--<div class="col-md-6 col-sm-6 col-xs-12">-->
                    <!--<input type="file" onchange="checkFile(this)" id="export_data" name="export_data" required-->
                           <!--class="form-control col-md-7 col-xs-12" , placeholder="模板文件">-->
                  <!--</div>-->

                <!--</div>-->

                <!--<div class="ln_solid"></div>-->
                <!--<div class="form-group">-->
                  <!--<div class="col-md-6 col-md-offset-3">-->
                    <!--<button type="submit" class="btn btn-primary">提交</button>-->
                  <!--</div>-->
                <!--</div>-->
              <!--</form>-->
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
{% end %}
{% block body_static %}
<script> function checkFile(obj) {
    var file=$(obj).val();
    var ext = file.substr(file.lastIndexOf('.')+1);
    if (ext != 'csv')
    {
        alert('只允许CSV文件');
        $(obj).val('');
        return;
    }
    else {
        return true;
    }
    
}</script>
<script> $('#input_box').parsley();</script>
<!-- 导入电影-->
<script src="{{static_url('extension/jquery-fine-uploader/fine-uploader.min.js')}}" type="text/javascript"></script>
<script type="text/template" id="qq-template">
        <div class="qq-uploader-selector qq-uploader" qq-drop-area-text="Drop files here">
            <div class="qq-total-progress-bar-container-selector qq-total-progress-bar-container">
                <div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-total-progress-bar-selector qq-progress-bar qq-total-progress-bar"></div>
            </div>
            <div class="qq-upload-drop-area-selector qq-upload-drop-area" qq-hide-dropzone>
                <span class="qq-upload-drop-area-text-selector"></span>
            </div>
            <div class="qq-upload-button-selector qq-upload-button">
                <div>Upload a file</div>
            </div>
            <span class="qq-drop-processing-selector qq-drop-processing">
                <span>Processing dropped files...</span>
                <span class="qq-drop-processing-spinner-selector qq-drop-processing-spinner"></span>
            </span>
            <ul class="qq-upload-list-selector qq-upload-list" aria-live="polite" aria-relevant="additions removals">
                <li>
                    <div class="qq-progress-bar-container-selector">
                        <div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-progress-bar-selector qq-progress-bar"></div>
                    </div>
                    <span class="qq-upload-spinner-selector qq-upload-spinner"></span>
                    <img class="qq-thumbnail-selector" qq-max-size="100" qq-server-scale>
                    <span class="qq-upload-file-selector qq-upload-file"></span>
                    <span class="qq-edit-filename-icon-selector qq-edit-filename-icon" aria-label="Edit filename"></span>
                    <input class="qq-edit-filename-selector qq-edit-filename" tabindex="0" type="text">
                    <span class="qq-upload-size-selector qq-upload-size"></span>
                    <button type="button" class="qq-btn qq-upload-cancel-selector qq-upload-cancel">Cancel</button>
                    <button type="button" class="qq-btn qq-upload-retry-selector qq-upload-retry">Retry</button>
                    <button type="button" class="qq-btn qq-upload-delete-selector qq-upload-delete">Delete</button>
                    <span role="status" class="qq-upload-status-text-selector qq-upload-status-text"></span>
                </li>
            </ul>

            <dialog class="qq-alert-dialog-selector">
                <div class="qq-dialog-message-selector"></div>
                <div class="qq-dialog-buttons">
                    <button type="button" class="qq-cancel-button-selector">Close</button>
                </div>
            </dialog>

            <dialog class="qq-confirm-dialog-selector">
                <div class="qq-dialog-message-selector"></div>
                <div class="qq-dialog-buttons">
                    <button type="button" class="qq-cancel-button-selector">No</button>
                    <button type="button" class="qq-ok-button-selector">Yes</button>
                </div>
            </dialog>

            <dialog class="qq-prompt-dialog-selector">
                <div class="qq-dialog-message-selector"></div>
                <input type="text">
                <div class="qq-dialog-buttons">
                    <button type="button" class="qq-cancel-button-selector">Cancel</button>
                    <button type="button" class="qq-ok-button-selector">Ok</button>
                </div>
            </dialog>
        </div>
    </script>
<script>
    var uploader = new qq.FineUploader(
        {
            debug:true,
            element: document.getElementById('fine-uploader'),
            request:{ endpoint:'/api/movie/export'},
            deleteFiles:{enabled:true, endpoint:'/api/movie/export/del'},
            validation:{allowedExtensions:['csv']},
            retry:{enableAuto:true}
        }
    );

</script>
<script src="{{static_url('extension/parsleyjs/dist/parsley.min.js')}}"> </script>

<script src="{{static_url('extension/DateJS/build/date.js')}}"> </script>
<script src="{{static_url('extension/moment/min/moment.min.js')}}"> </script>
<script src="{{static_url('extension/bootstrap-daterangepicker/daterangepicker.js')}}"> </script>
{% end %}
